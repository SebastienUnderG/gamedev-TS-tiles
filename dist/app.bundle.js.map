{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./index.ts","webpack:///./Game.ts","webpack:///./Assets.ts","webpack:///./Preload.ts","webpack:///./Hero.ts","webpack:///./Keyboard.ts","webpack:///./MapMaker.ts","webpack:///./Camera.ts","webpack:///../assets/character.png","webpack:///../assets/tiles.png"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Game_1","console","log","game","Game","window","onload","canvas","document","getElementById","width","height","context","getContext","run","Assets_1","Hero_1","Keyboard_1","MapMaker_1","Camera_1","[object Object]","this","loader","Assets","character","tiles","keyboard","Keyboard","map","MapMaker","tick","elapsed","requestAnimationFrame","ctx","clearRect","delta","_previousElapsed","Math","min","update","render","listenForEvents","LEFT","RIGHT","UP","DOWN","tileAtlas","getImage","hero","Hero","camera","Camera","follow","dirx","diry","isDown","move","_drawLayer","drawImage","image","screenX","screenY","load","Promise","all","then","init","loadImage","layer","startCol","floor","x","tsize","endCol","startRow","y","endRow","offsetX","offsetY","tile","getTile","round","cols","rows","beginPath","moveTo","lineTo","stroke","Preload_1","images","Map","src","resolve","reject","preloadimages","set","has","obj","cb","loaded","toload","Array","Image","onerror","onabort","SPEED","_collide","maxX","maxY","max","row","col","left","right","top","bottom","isSolidTileAtXY","getRow","getY","getCol","getX","_keys","keys","addEventListener","_onKeyDown","_onKeyUp","forEach","event","keyCode","preventDefault","Error","layers","reduce","res","index","sprite","following"],"mappings":"aACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,mFClFA,MAAAC,EAAApC,EAAA,GAEAqC,QAAQC,IAAI,yEAMZ,IAAIC,EAAa,IAAIH,EAAAI,KAQrBC,OAAOC,OAAS,WAEZ,IAAIC,EAA+CC,SAASC,eAAe,WAE3EF,EAAOG,MAAQ,IACfH,EAAOI,OAAS,IAKhB,IAAIC,EAAoCL,EAAOM,WAAW,MAE1DV,EAAKW,IAAIF,mFC5Bb,MAAAG,EAAAnD,EAAA,GACAoD,EAAApD,EAAA,GACAqD,EAAArD,EAAA,GACAsD,EAAAtD,EAAA,GACAuD,EAAAvD,EAAA,GAGAE,EAAAsC,KAAA,MAAAgB,cAGIC,KAAAC,OAAiB,IAAIP,EAAAQ,OACrBF,KAAAG,UAAkB5D,EAAQ,GAC1ByD,KAAAI,MAAc7D,EAAQ,GACtByD,KAAAK,SAAqB,IAAIT,EAAAU,SACzBN,KAAAO,IAAgB,IAAIV,EAAAW,SA4EpBR,KAAAS,KAAQC,IAEJ1B,OAAO2B,sBAAsBX,KAAKS,MAGlCT,KAAKY,IAAIC,UAAU,EAAG,EAAG,IAAK,KAG9B,IAAIC,GAASJ,EAAUV,KAAKe,kBAAoB,IAChDD,EAAQE,KAAKC,IAAIH,EAAO,KACxBd,KAAKe,iBAAmBL,EAExBV,KAAKkB,OAAOJ,GAEZd,KAAKmB,UArFTpB,OAEIC,KAAKK,SAASe,gBACV,CAACpB,KAAKK,SAASgB,KAAMrB,KAAKK,SAASiB,MAAOtB,KAAKK,SAASkB,GAAIvB,KAAKK,SAASmB,OAE9ExB,KAAKyB,UAAYzB,KAAKC,OAAOyB,SAAS,SAEtC1B,KAAK2B,KAAO,IAAIhC,EAAAiC,KAAK5B,KAAKO,IAAKP,KAAKC,OAAQ,IAAK,KACjDD,KAAK6B,OAAS,IAAI/B,EAAAgC,OAAO9B,KAAKO,IAAK,IAAK,KACxCP,KAAK6B,OAAOE,OAAO/B,KAAK2B,MAG5B5B,OAAOe,GAEH,IAAIkB,EAAO,EACPC,EAAO,EACPjC,KAAKK,SAAS6B,OAAOlC,KAAKK,SAASgB,MACnCW,GAAQ,EACDhC,KAAKK,SAAS6B,OAAOlC,KAAKK,SAASiB,OAC1CU,EAAO,EACAhC,KAAKK,SAAS6B,OAAOlC,KAAKK,SAASkB,IAC1CU,GAAQ,EACDjC,KAAKK,SAAS6B,OAAOlC,KAAKK,SAASmB,QAC1CS,EAAO,GAGXjC,KAAK2B,KAAKQ,KAAKrB,EAAOkB,EAAMC,GAC5BjC,KAAK6B,OAAOX,SAIhBnB,SAEIC,KAAKoC,WAAW,GAGhBpC,KAAKY,IAAIyB,UACLrC,KAAK2B,KAAKW,MACVtC,KAAK2B,KAAKY,QAAUvC,KAAK2B,KAAKtC,MAAQ,EACtCW,KAAK2B,KAAKa,QAAUxC,KAAK2B,KAAKrC,OAAS,GAG3CU,KAAKoC,WAAW,GAOpBrC,IAAIR,GACAS,KAAKY,IAAMrB,EACXS,KAAKe,iBAAmB,EAExB,IAAItC,EAAoBuB,KAAKyC,OAE7BC,QAAQC,IAAIlE,GAAGmE,KAAK,KAEhB5C,KAAK6C,OACL7D,OAAO2B,sBAAsBX,KAAKS,QAK1CV,OACI,MAAO,CACHC,KAAKC,OAAO6C,UAAU,QAAS9C,KAAKI,OACpCJ,KAAKC,OAAO6C,UAAU,OAAQ9C,KAAKG,YAwB3CJ,WAAWgD,GACP,IAAIC,EAAWhC,KAAKiC,MAAMjD,KAAK6B,OAAOqB,EAAIlD,KAAKO,IAAI4C,OAC/CC,EAASJ,EAAYhD,KAAK6B,OAAOxC,MAAQW,KAAKO,IAAI4C,MAClDE,EAAWrC,KAAKiC,MAAMjD,KAAK6B,OAAOyB,EAAItD,KAAKO,IAAI4C,OAC/CI,EAASF,EAAYrD,KAAK6B,OAAOvC,OAASU,KAAKO,IAAI4C,MACnDK,GAAWxD,KAAK6B,OAAOqB,EAAIF,EAAWhD,KAAKO,IAAI4C,MAC/CM,GAAWzD,KAAK6B,OAAOyB,EAAID,EAAWrD,KAAKO,IAAI4C,MAEnD,IAAK,IAAInG,EAAIgG,EAAUhG,GAAKoG,EAAQpG,IAChC,IAAK,IAAIS,EAAI4F,EAAU5F,GAAK8F,EAAQ9F,IAAK,CACrC,IAAIiG,EAAO1D,KAAKO,IAAIoD,QAAQZ,EAAO/F,EAAGS,GAClCyF,GAAKlG,EAAIgG,GAAYhD,KAAKO,IAAI4C,MAAQK,EACtCF,GAAK7F,EAAI4F,GAAYrD,KAAKO,IAAI4C,MAAQM,EAC7B,IAATC,GACA1D,KAAKY,IAAIyB,UACLrC,KAAKyB,WACJiC,EAAO,GAAK1D,KAAKO,IAAI4C,MACtB,EACAnD,KAAKO,IAAI4C,MACTnD,KAAKO,IAAI4C,MACTnC,KAAK4C,MAAMV,GACXlC,KAAK4C,MAAMN,GACXtD,KAAKO,IAAI4C,MACTnD,KAAKO,IAAI4C,QAQ7BpD,YACI,IAEImD,EAAGI,EAFHjE,EAAQW,KAAKO,IAAIsD,KAAO7D,KAAKO,IAAI4C,MACjC7D,EAASU,KAAKO,IAAIuD,KAAO9D,KAAKO,IAAI4C,MAEtC,IAAK,IAAI1F,EAAI,EAAGA,EAAIuC,KAAKO,IAAIuD,KAAMrG,IAC/ByF,GAAKlD,KAAK6B,OAAOqB,EACjBI,EAAI7F,EAAIuC,KAAKO,IAAI4C,MAAQnD,KAAK6B,OAAOyB,EACrCtD,KAAKY,IAAImD,YACT/D,KAAKY,IAAIoD,OAAOd,EAAGI,GACnBtD,KAAKY,IAAIqD,OAAO5E,EAAOiE,GACvBtD,KAAKY,IAAIsD,SAEb,IAAK,IAAIlH,EAAI,EAAGA,EAAIgD,KAAKO,IAAIsD,KAAM7G,IAC/BkG,EAAIlG,EAAIgD,KAAKO,IAAI4C,MAAQnD,KAAK6B,OAAOqB,EACrCI,GAAKtD,KAAK6B,OAAOyB,EACjBtD,KAAKY,IAAImD,YACT/D,KAAKY,IAAIoD,OAAOd,EAAGI,GACnBtD,KAAKY,IAAIqD,OAAOf,EAAG5D,GACnBU,KAAKY,IAAIsD,0FC9JrB,MAAAC,EAAA5H,EAAA,GAEAE,EAAAyD,OAAA,MAAAH,cACIC,KAAAoE,OAAwC,IAAIC,IAE5CtE,UAAU7B,EAAaoG,GAWnB,OAVwC,IAAI5B,QACxC,CAAC6B,EAAcC,KACXL,EAAAM,cAAc,CAACH,GAAOhC,IAClBtC,KAAKoE,OAAOM,IAAIxG,EAAKoE,EAAM,IAC3BiC,EAAQjC,EAAM,QAW9BvC,SAAS7B,GACL,OAAQ8B,KAAKoE,OAAOO,IAAIzG,GAAQ8B,KAAKoE,OAAO5G,IAAIU,GAAO,sFCtB/DzB,EAAAgI,cAAA,SAA8BG,EAAUC,GACpC,IAAIC,EAAS,EACTC,EAAS,EACTX,EAASQ,aAAeI,MAAQ,GAAK,GAEzC,IAAK,IAAIrI,KAAKiI,EACVG,IACAX,EAAOzH,GAAK,IAAIsI,MAChBb,EAAOzH,GAAG2H,IAAMM,EAAIjI,GACpByH,EAAOzH,GAAGsC,OAASwD,EACnB2B,EAAOzH,GAAGuI,QAAUzC,EACpB2B,EAAOzH,GAAGwI,QAAU1C,EAGxB,SAASA,MACCqC,GAAUC,GAAQF,EAAGT,oFCfnC3H,EAAAmF,KAAA,MAYI7B,YAAYQ,EAAUN,EAAaiD,EAAWI,GAV9CtD,KAAAoF,MAAgB,IAWZpF,KAAKO,IAAMA,EACXP,KAAKkD,EAAIA,EACTlD,KAAKsD,EAAIA,EACTtD,KAAKX,MAAQkB,EAAI4C,MACjBnD,KAAKV,OAASiB,EAAI4C,MAClBnD,KAAKsC,MAAQrC,EAAOyB,SAAS,QAIjC3B,SAASE,EAAa/B,GAClB8B,KAAKsC,MAAQrC,EAAOyB,SAAS,QAGjC3B,KAAKe,EAAekB,EAAcC,GAE9BjC,KAAKkD,GAAKlB,EAAOhC,KAAKoF,MAAQtE,EAC9Bd,KAAKsD,GAAKrB,EAAOjC,KAAKoF,MAAQtE,EAG9Bd,KAAKqF,SAASrD,EAAMC,GAGpB,IAAIqD,EAAOtF,KAAKO,IAAIsD,KAAO7D,KAAKO,IAAI4C,MAChCoC,EAAOvF,KAAKO,IAAIuD,KAAO9D,KAAKO,IAAI4C,MACpCnD,KAAKkD,EAAIlC,KAAKwE,IAAI,EAAGxE,KAAKC,IAAIjB,KAAKkD,EAAGoC,IACtCtF,KAAKsD,EAAItC,KAAKwE,IAAI,EAAGxE,KAAKC,IAAIjB,KAAKsD,EAAGiC,IAG1CxF,SAASiC,EAAcC,GAEnB,IAAIwD,EAAKC,EAGLC,EAAO3F,KAAKkD,EAAIlD,KAAKX,MAAQ,EAC7BuG,EAAQ5F,KAAKkD,EAAIlD,KAAKX,MAAQ,EAAI,EAClCwG,EAAM7F,KAAKsD,EAAItD,KAAKV,OAAS,EAC7BwG,EAAS9F,KAAKsD,EAAItD,KAAKV,OAAS,EAAI,GAIpCU,KAAKO,IAAIwF,gBAAgBJ,EAAME,IAC/B7F,KAAKO,IAAIwF,gBAAgBH,EAAOC,IAChC7F,KAAKO,IAAIwF,gBAAgBH,EAAOE,IAChC9F,KAAKO,IAAIwF,gBAAgBJ,EAAMG,MAK/B7D,EAAO,GACPwD,EAAMzF,KAAKO,IAAIyF,OAAOF,GACtB9F,KAAKsD,GAAKtD,KAAKV,OAAS,EAAIU,KAAKO,IAAI0F,KAAKR,IACnCxD,EAAO,GACdwD,EAAMzF,KAAKO,IAAIyF,OAAOH,GACtB7F,KAAKsD,EAAItD,KAAKV,OAAS,EAAIU,KAAKO,IAAI0F,KAAKR,EAAM,IACxCzD,EAAO,GACd0D,EAAM1F,KAAKO,IAAI2F,OAAON,GACtB5F,KAAKkD,GAAKlD,KAAKX,MAAQ,EAAIW,KAAKO,IAAI4F,KAAKT,IAClC1D,EAAO,IACd0D,EAAM1F,KAAKO,IAAI2F,OAAOP,GACtB3F,KAAKkD,EAAIlD,KAAKX,MAAQ,EAAIW,KAAKO,IAAI4F,KAAKT,EAAM,sFCxE1DjJ,EAAA6D,SAAA,MAAAP,cAEIC,KAAAqB,KAAe,GACfrB,KAAAsB,MAAgB,GAChBtB,KAAAuB,GAAa,GACbvB,KAAAwB,KAAe,GAEfxB,KAAAoG,MAAa,GAEbrG,gBAAgBsG,GACZrH,OAAOsH,iBAAiB,UAAWtG,KAAKuG,WAAWpI,KAAK6B,OACxDhB,OAAOsH,iBAAiB,QAAStG,KAAKwG,SAASrI,KAAK6B,OAEpDqG,EAAKI,QAAQ,SAAUvI,GACnB8B,KAAKoG,MAAMlI,IAAO,GACpBC,KAAK6B,OAGXD,WAAW2G,GACP,IAAIC,EAAUD,EAAMC,QAChBA,KAAW3G,KAAKoG,QAChBM,EAAME,iBACN5G,KAAKoG,MAAMO,IAAW,GAI9B5G,SAAS2G,GAEL,IAAIC,EAAUD,EAAMC,QAChBA,KAAW3G,KAAKoG,QAChBM,EAAME,iBACN5G,KAAKoG,MAAMO,IAAW,GAK9B5G,OAAO4G,GACH,IAAUA,KAAW3G,KAAKoG,MACtB,MAAM,IAAIS,MAAM,WAAaF,EAAU,6BAE3C,OAAO3G,KAAKoG,MAAMO,oFCxC1BlK,EAAA+D,SAAA,MAAAT,cACIC,KAAA6D,KAAe,GACf7D,KAAA8D,KAAe,GACf9D,KAAAmD,MAAgB,GAEhBnD,KAAA8G,OAAqB,CAAC,CAClB,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAClC,CACC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACjC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAIrC/G,QAAQgD,EAAY2C,EAAaD,GAC7B,OAAOzF,KAAK8G,OAAO/D,GAAO0C,EAAMzF,KAAK6D,KAAO6B,GAIhD3F,gBAAgBmD,EAAWI,GACvB,IAAIoC,EAAM1E,KAAKiC,MAAMC,EAAIlD,KAAKmD,OAC1BsC,EAAMzE,KAAKiC,MAAMK,EAAItD,KAAKmD,OAI9B,OAAOnD,KAAK8G,OAAOC,OAAO,SAAUC,EAAUjE,EAAYkE,GACtD,IAAIvD,EAAO1D,KAAK2D,QAAQsD,EAAOvB,EAAKD,GAEpC,OAAOuB,GADgB,IAATtD,GAAuB,IAATA,GAE9BvF,KAAK6B,OAAO,GAIlBD,OAAOmD,GACH,OAAOlC,KAAKiC,MAAMC,EAAIlD,KAAKmD,OAG/BpD,OAAOuD,GACH,OAAOtC,KAAKiC,MAAMK,EAAItD,KAAKmD,OAG/BpD,KAAK2F,GACD,OAAOA,EAAM1F,KAAKmD,MAGtBpD,KAAK0F,GACD,OAAOA,EAAMzF,KAAKmD,uFClE1B1G,EAAAqF,OAAA,MAUI/B,YAAYQ,EAAUlB,EAAYC,GAC9BU,KAAKkD,EAAI,EACTlD,KAAKsD,EAAI,EACTtD,KAAKX,MAAQA,EACbW,KAAKV,OAASA,EACdU,KAAKsF,KAAO/E,EAAIsD,KAAOtD,EAAI4C,MAAQ9D,EACnCW,KAAKuF,KAAOhF,EAAIuD,KAAOvD,EAAI4C,MAAQ7D,EAGvCS,OAAOmH,GACHlH,KAAKmH,UAAYD,EACjBA,EAAO3E,QAAU,EACjB2E,EAAO1E,QAAU,EAIrBzC,SAGIC,KAAKmH,UAAU5E,QAAUvC,KAAKX,MAAQ,EACtCW,KAAKmH,UAAU3E,QAAUxC,KAAKV,OAAS,EAGvCU,KAAKkD,EAAIlD,KAAKmH,UAAUjE,EAAIlD,KAAKX,MAAQ,EACzCW,KAAKsD,EAAItD,KAAKmH,UAAU7D,EAAItD,KAAKV,OAAS,EAE1CU,KAAKkD,EAAIlC,KAAKwE,IAAI,EAAGxE,KAAKC,IAAIjB,KAAKkD,EAAGlD,KAAKsF,OAC3CtF,KAAKsD,EAAItC,KAAKwE,IAAI,EAAGxE,KAAKC,IAAIjB,KAAKsD,EAAGtD,KAAKuF,QAMvCvF,KAAKmH,UAAUjE,EAAIlD,KAAKX,MAAQ,GAChCW,KAAKmH,UAAUjE,EAAIlD,KAAKsF,KAAOtF,KAAKX,MAAQ,KAC5CW,KAAKmH,UAAU5E,QAAUvC,KAAKmH,UAAUjE,EAAIlD,KAAKkD,IAGjDlD,KAAKmH,UAAU7D,EAAItD,KAAKV,OAAS,GACjCU,KAAKmH,UAAU7D,EAAItD,KAAKuF,KAAOvF,KAAKV,OAAS,KAC7CU,KAAKmH,UAAU3E,QAAUxC,KAAKmH,UAAU7D,EAAItD,KAAKsD,sBClD7D5G,EAAAD,QAAiBF,EAAAkC,EAAuB,wDCAxC/B,EAAAD,QAAiBF,EAAAkC,EAAuB","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import {Game} from \"./Game\";\n\nconsole.log('See this in your browser console: Typescript Webpack Starter Launched');\n\n\n//\n// Game object\n//\nlet game: Game = new Game();\n// let game: SimpleGame = new SimpleGame();\n\n\n//\n// start up function\n//\n\nwindow.onload = function () {\n\n    let canvas: HTMLCanvasElement = <HTMLCanvasElement>document.getElementById(\"windows\");\n\n    canvas.width = 512;\n    canvas.height = 512;\n\n    // canvas.width  = window.innerWidth;\n    // canvas.width = window.innerHeight;\n\n    let context: CanvasRenderingContext2D = canvas.getContext(\"2d\");\n\n    game.run(context);\n\n\n};\n\n\n","import {Assets} from \"./Assets\";\nimport {Hero} from \"./Hero\";\nimport {Keyboard} from \"./Keyboard\";\nimport {MapMaker} from \"./MapMaker\";\nimport {Camera} from \"./Camera\";\n\n\nexport class Game {\n    ctx: CanvasRenderingContext2D;\n    _previousElapsed: number;\n    loader: Assets = new Assets();\n    character: File = require('../assets/character.png');\n    tiles: File = require('../assets/tiles.png');\n    keyboard: Keyboard = new Keyboard();\n    map: MapMaker = new MapMaker();\n    hero: Hero;\n    tileAtlas: any;\n    camera: Camera;\n\n    init() {\n\n        this.keyboard.listenForEvents(\n            [this.keyboard.LEFT, this.keyboard.RIGHT, this.keyboard.UP, this.keyboard.DOWN]);\n\n        this.tileAtlas = this.loader.getImage('tiles');\n\n        this.hero = new Hero(this.map, this.loader, 160, 160);\n        this.camera = new Camera(this.map, 512, 512);\n        this.camera.follow(this.hero);\n    }\n\n    update(delta: number) {\n        // handle hero movement with arrow keys\n        let dirx = 0;\n        let diry = 0;\n        if (this.keyboard.isDown(this.keyboard.LEFT)) {\n            dirx = -1;\n        } else if (this.keyboard.isDown(this.keyboard.RIGHT)) {\n            dirx = 1;\n        } else if (this.keyboard.isDown(this.keyboard.UP)) {\n            diry = -1;\n        } else if (this.keyboard.isDown(this.keyboard.DOWN)) {\n            diry = 1;\n        }\n\n        this.hero.move(delta, dirx, diry);\n        this.camera.update();\n\n    }\n\n    render() {\n        // draw map background layer\n        this._drawLayer(0);\n\n        // draw main character\n        this.ctx.drawImage(\n            this.hero.image,\n            this.hero.screenX - this.hero.width / 2,\n            this.hero.screenY - this.hero.height / 2);\n\n        // draw map top layer\n        this._drawLayer(1);\n\n        // this._drawGrid();\n\n    }\n\n\n    run(context: CanvasRenderingContext2D) {\n        this.ctx = context;\n        this._previousElapsed = 0;\n\n        let p: Promise<any>[] = this.load();\n\n        Promise.all(p).then(() => {\n\n            this.init();\n            window.requestAnimationFrame(this.tick);\n        })\n\n    }\n\n    load() {\n        return [\n            this.loader.loadImage('tiles', this.tiles),\n            this.loader.loadImage('hero', this.character)\n        ];\n    }\n\n\n    tick = (elapsed: number) => {\n\n        window.requestAnimationFrame(this.tick);\n\n        // clear previous frame\n        this.ctx.clearRect(0, 0, 512, 512);\n\n        // compute delta time in seconds -- also cap it\n        let delta = (elapsed - this._previousElapsed) / 1000.0;\n        delta = Math.min(delta, 0.25); // maximum delta of 250 ms\n        this._previousElapsed = elapsed;\n\n        this.update(delta);\n\n        this.render();\n\n    }\n\n\n    _drawLayer(layer: any) {\n        let startCol = Math.floor(this.camera.x / this.map.tsize);\n        let endCol = startCol + (this.camera.width / this.map.tsize);\n        let startRow = Math.floor(this.camera.y / this.map.tsize);\n        let endRow = startRow + (this.camera.height / this.map.tsize);\n        let offsetX = -this.camera.x + startCol * this.map.tsize;\n        let offsetY = -this.camera.y + startRow * this.map.tsize;\n\n        for (let c = startCol; c <= endCol; c++) {\n            for (let r = startRow; r <= endRow; r++) {\n                let tile = this.map.getTile(layer, c, r);\n                let x = (c - startCol) * this.map.tsize + offsetX;\n                let y = (r - startRow) * this.map.tsize + offsetY;\n                if (tile !== 0) { // 0 => empty tile\n                    this.ctx.drawImage(\n                        this.tileAtlas, // image\n                        (tile - 1) * this.map.tsize, // source x\n                        0, // source y\n                        this.map.tsize, // source width\n                        this.map.tsize, // source height\n                        Math.round(x),  // target x\n                        Math.round(y), // target y\n                        this.map.tsize, // target width\n                        this.map.tsize // target height\n                    );\n                }\n            }\n        }\n    }\n\n\n    _drawGrid() {\n        let width = this.map.cols * this.map.tsize;\n        let height = this.map.rows * this.map.tsize;\n        let x, y;\n        for (let r = 0; r < this.map.rows; r++) {\n            x = -this.camera.x;\n            y = r * this.map.tsize - this.camera.y;\n            this.ctx.beginPath();\n            this.ctx.moveTo(x, y);\n            this.ctx.lineTo(width, y);\n            this.ctx.stroke();\n        }\n        for (let c = 0; c < this.map.cols; c++) {\n            x = c * this.map.tsize - this.camera.x;\n            y = -this.camera.y;\n            this.ctx.beginPath();\n            this.ctx.moveTo(x, y);\n            this.ctx.lineTo(x, height);\n            this.ctx.stroke();\n        }\n\n    }\n\n\n}\n","import {preloadimages} from './Preload';\n\nexport class Assets {\n    images: Map<string, HTMLImageElement> = new Map<string, HTMLImageElement>();\n\n    loadImage(key: string, src: any): any {\n        let isLoad: Promise<HTMLImageElement> = new Promise(\n            (resolve: any, reject: any) => {\n                preloadimages([src], (image: HTMLImageElement) => {\n                    this.images.set(key, image[0]);\n                    resolve(image[0]);\n                });\n\n            }\n        );\n\n        return isLoad;\n\n    }\n\n\n    getImage(key: string): HTMLImageElement {\n        return (this.images.has(key)) ? this.images.get(key) : null;\n    }\n\n\n}\n\n","export function preloadimages(obj: any, cb: any) {\n    let loaded = 0;\n    let toload = 0;\n    let images = obj instanceof Array ? [] : {};\n\n    for (let i in obj) {\n        toload++;\n        images[i] = new Image();\n        images[i].src = obj[i];\n        images[i].onload = load;\n        images[i].onerror = load;\n        images[i].onabort = load;\n    }\n\n    function load() {\n        if (++loaded >= toload) cb(images);\n    }\n}\n","export class Hero {\n\n    SPEED: number = 560;\n    map: any;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    image: any;\n    screenX: number;\n    screenY: number;\n\n    constructor(map: any, loader: any, x: number, y: number) {\n        this.map = map;\n        this.x = x;\n        this.y = y;\n        this.width = map.tsize;\n        this.height = map.tsize;\n        this.image = loader.getImage('hero');\n\n    }\n\n    setImage(loader: any, key: string) {\n        this.image = loader.getImage('hero');\n    }\n\n    move(delta: number, dirx: number, diry: number) {\n        // move hero\n        this.x += dirx * this.SPEED * delta;\n        this.y += diry * this.SPEED * delta;\n\n        // check if we walked into a non-walkable tile\n        this._collide(dirx, diry);\n\n        // clamp values\n        let maxX = this.map.cols * this.map.tsize;\n        let maxY = this.map.rows * this.map.tsize;\n        this.x = Math.max(0, Math.min(this.x, maxX));\n        this.y = Math.max(0, Math.min(this.y, maxY));\n    }\n\n    _collide(dirx: number, diry: number) {\n\n        let row, col;\n        // -1 in right and bottom is because image ranges from 0..63\n        // and not up to 64\n        let left = this.x - this.width / 2;\n        let right = this.x + this.width / 2 - 1;\n        let top = this.y - this.height / 2;\n        let bottom = this.y + this.height / 2 - 1;\n\n        // check for collisions on sprite sides\n        let collision =\n            this.map.isSolidTileAtXY(left, top) ||\n            this.map.isSolidTileAtXY(right, top) ||\n            this.map.isSolidTileAtXY(right, bottom) ||\n            this.map.isSolidTileAtXY(left, bottom);\n        if (!collision) {\n            return;\n        }\n\n        if (diry > 0) {\n            row = this.map.getRow(bottom);\n            this.y = -this.height / 2 + this.map.getY(row);\n        } else if (diry < 0) {\n            row = this.map.getRow(top);\n            this.y = this.height / 2 + this.map.getY(row + 1);\n        } else if (dirx > 0) {\n            col = this.map.getCol(right);\n            this.x = -this.width / 2 + this.map.getX(col);\n        } else if (dirx < 0) {\n            col = this.map.getCol(left);\n            this.x = this.width / 2 + this.map.getX(col + 1);\n        }\n\n    }\n\n}\n","export class Keyboard {\n\n    LEFT: number = 37;\n    RIGHT: number = 39;\n    UP: number = 38;\n    DOWN: number = 40;\n\n    _keys: any = {};\n\n    listenForEvents(keys: any) {\n        window.addEventListener('keydown', this._onKeyDown.bind(this));\n        window.addEventListener('keyup', this._onKeyUp.bind(this));\n\n        keys.forEach(function (key: string) {\n            this._keys[key] = false;\n        }.bind(this));\n    }\n\n    _onKeyDown(event: any) {\n        let keyCode = event.keyCode;\n        if (keyCode in this._keys) {\n            event.preventDefault();\n            this._keys[keyCode] = true;\n        }\n    }\n\n    _onKeyUp(event: any) {\n\n        let keyCode = event.keyCode;\n        if (keyCode in this._keys) {\n            event.preventDefault();\n            this._keys[keyCode] = false;\n        }\n\n    }\n\n    isDown(keyCode: any) {\n        if (<any>!keyCode in this._keys) {\n            throw new Error('Keycode ' + keyCode + ' is not being listened to');\n        }\n        return this._keys[keyCode];\n    }\n\n\n}\n","export class MapMaker {\n    cols: number = 12;\n    rows: number = 12;\n    tsize: number = 64;\n\n    layers: number[][] = [[\n        3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,\n        3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3,\n        3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3,\n        3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3,\n        3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3,\n        3, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 3,\n        3, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 3,\n        3, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 3,\n        3, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 3,\n        3, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 3,\n        3, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 3,\n        3, 3, 3, 3, 3, 2, 3, 3, 3, 3, 3, 3\n    ], [\n        4, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4,\n        4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4,\n        4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4,\n        4, 0, 0, 5, 0, 0, 0, 0, 0, 5, 0, 4,\n        4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4,\n        4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4,\n        4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4,\n        4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4,\n        4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4,\n        4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4,\n        4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n        4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3\n    ]];\n\n\n    getTile(layer: any, col: number, row: number) {\n        return this.layers[layer][row * this.cols + col];\n    }\n\n\n    isSolidTileAtXY(x: number, y: number) {\n        let col = Math.floor(x / this.tsize);\n        let row = Math.floor(y / this.tsize);\n\n        // tiles 3 and 5 are solid -- the rest are walkable\n        // loop through all layers and return TRUE if any tile is solid\n        return this.layers.reduce(function (res: any, layer: any, index: any) {\n            let tile = this.getTile(index, col, row);\n            let isSolid = tile === 3 || tile === 5;\n            return res || isSolid;\n        }.bind(this), false);\n    }\n\n\n    getCol(x: number) {\n        return Math.floor(x / this.tsize);\n    }\n\n    getRow(y: number) {\n        return Math.floor(y / this.tsize);\n    }\n\n    getX(col: number) {\n        return col * this.tsize;\n    }\n\n    getY(row: number) {\n        return row * this.tsize;\n    }\n\n\n}\n","export class Camera {\n\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    maxX: number;\n    maxY: number;\n    following: any;\n\n    constructor(map: any, width: any, height: any) {\n        this.x = 0;\n        this.y = 0;\n        this.width = width;\n        this.height = height;\n        this.maxX = map.cols * map.tsize - width;\n        this.maxY = map.rows * map.tsize - height;\n    }\n\n    follow(sprite: any) {\n        this.following = sprite;\n        sprite.screenX = 0;\n        sprite.screenY = 0;\n    }\n\n\n    update() {\n        // assume followed sprite should be placed at the center of the screen\n        // whenever possible\n        this.following.screenX = this.width / 2;\n        this.following.screenY = this.height / 2;\n\n        // make the camera follow the sprite\n        this.x = this.following.x - this.width / 2;\n        this.y = this.following.y - this.height / 2;\n        // clamp values\n        this.x = Math.max(0, Math.min(this.x, this.maxX));\n        this.y = Math.max(0, Math.min(this.y, this.maxY));\n\n        // in map corners, the sprite cannot be placed in the center of the screen\n        // and we have to change its screen coordinates\n\n        // left and right sides\n        if (this.following.x < this.width / 2 ||\n            this.following.x > this.maxX + this.width / 2) {\n            this.following.screenX = this.following.x - this.x;\n        }\n        // top and bottom sides\n        if (this.following.y < this.height / 2 ||\n            this.following.y > this.maxY + this.height / 2) {\n            this.following.screenY = this.following.y - this.y;\n        }\n\n    }\n\n}\n","module.exports = __webpack_public_path__ + \"bade87133f6bdf7b831e4ef562915613.png\";","module.exports = __webpack_public_path__ + \"915c1f04b733aea4fa6228e72ed11290.png\";"],"sourceRoot":""}