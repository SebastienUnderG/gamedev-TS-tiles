!function(t){var e={};function i(s){if(e[s])return e[s].exports;var h=e[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,i),h.l=!0,h.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var h in t)i.d(s,h,function(e){return t[e]}.bind(null,h));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1);console.log("See this in your browser console: Typescript Webpack Starter Launched");let h=new s.Game;window.onload=function(){let t=document.getElementById("windows");t.width=512,t.height=512;let e=t.getContext("2d");h.run(e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(2),h=i(4),o=i(5),r=i(6),a=i(7);e.Game=class{constructor(){this.loader=new s.Assets,this.character=i(8),this.tiles=i(9),this.keyboard=new o.Keyboard,this.map=new r.MapMaker,this.tick=t=>{window.requestAnimationFrame(this.tick),this.ctx.clearRect(0,0,512,512);let e=(t-this._previousElapsed)/1e3;e=Math.min(e,.25),this._previousElapsed=t,this.update(e),this.render()}}init(){this.keyboard.listenForEvents([this.keyboard.LEFT,this.keyboard.RIGHT,this.keyboard.UP,this.keyboard.DOWN]),this.tileAtlas=this.loader.getImage("tiles"),this.hero=new h.Hero(this.map,this.loader,160,160),this.camera=new a.Camera(this.map,512,512),this.camera.follow(this.hero)}update(t){let e=0,i=0;this.keyboard.isDown(this.keyboard.LEFT)?e=-1:this.keyboard.isDown(this.keyboard.RIGHT)?e=1:this.keyboard.isDown(this.keyboard.UP)?i=-1:this.keyboard.isDown(this.keyboard.DOWN)&&(i=1),this.hero.move(t,e,i),this.camera.update()}render(){this._drawLayer(0),this.ctx.drawImage(this.hero.image,this.hero.screenX-this.hero.width/2,this.hero.screenY-this.hero.height/2),this._drawLayer(1)}run(t){this.ctx=t,this._previousElapsed=0;let e=this.load();Promise.all(e).then(()=>{this.init(),window.requestAnimationFrame(this.tick)})}load(){return[this.loader.loadImage("tiles",this.tiles),this.loader.loadImage("hero",this.character)]}_drawLayer(t){let e=Math.floor(this.camera.x/this.map.tsize),i=e+this.camera.width/this.map.tsize,s=Math.floor(this.camera.y/this.map.tsize),h=s+this.camera.height/this.map.tsize,o=-this.camera.x+e*this.map.tsize,r=-this.camera.y+s*this.map.tsize;for(let a=e;a<=i;a++)for(let i=s;i<=h;i++){let h=this.map.getTile(t,a,i),n=(a-e)*this.map.tsize+o,l=(i-s)*this.map.tsize+r;0!==h&&this.ctx.drawImage(this.tileAtlas,(h-1)*this.map.tsize,0,this.map.tsize,this.map.tsize,Math.round(n),Math.round(l),this.map.tsize,this.map.tsize)}}_drawGrid(){let t,e,i=this.map.cols*this.map.tsize,s=this.map.rows*this.map.tsize;for(let s=0;s<this.map.rows;s++)t=-this.camera.x,e=s*this.map.tsize-this.camera.y,this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(i,e),this.ctx.stroke();for(let i=0;i<this.map.cols;i++)t=i*this.map.tsize-this.camera.x,e=-this.camera.y,this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(t,s),this.ctx.stroke()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(3);e.Assets=class{constructor(){this.images=new Map}loadImage(t,e){return new Promise((i,h)=>{s.preloadimages([e],e=>{this.images.set(t,e[0]),i(e[0])})})}getImage(t){return this.images.has(t)?this.images.get(t):null}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.preloadimages=function(t,e){let i=0,s=0,h=t instanceof Array?[]:{};for(let e in t)s++,h[e]=new Image,h[e].src=t[e],h[e].onload=o,h[e].onerror=o,h[e].onabort=o;function o(){++i>=s&&e(h)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Hero=class{constructor(t,e,i,s){this.SPEED=560,this.map=t,this.x=i,this.y=s,this.width=t.tsize,this.height=t.tsize,this.image=e.getImage("hero")}setImage(t,e){this.image=t.getImage("hero")}move(t,e,i){this.x+=e*this.SPEED*t,this.y+=i*this.SPEED*t,this._collide(e,i);let s=this.map.cols*this.map.tsize,h=this.map.rows*this.map.tsize;this.x=Math.max(0,Math.min(this.x,s)),this.y=Math.max(0,Math.min(this.y,h))}_collide(t,e){let i,s,h=this.x-this.width/2,o=this.x+this.width/2-1,r=this.y-this.height/2,a=this.y+this.height/2-1;(this.map.isSolidTileAtXY(h,r)||this.map.isSolidTileAtXY(o,r)||this.map.isSolidTileAtXY(o,a)||this.map.isSolidTileAtXY(h,a))&&(e>0?(i=this.map.getRow(a),this.y=-this.height/2+this.map.getY(i)):e<0?(i=this.map.getRow(r),this.y=this.height/2+this.map.getY(i+1)):t>0?(s=this.map.getCol(o),this.x=-this.width/2+this.map.getX(s)):t<0&&(s=this.map.getCol(h),this.x=this.width/2+this.map.getX(s+1)))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Keyboard=class{constructor(){this.LEFT=37,this.RIGHT=39,this.UP=38,this.DOWN=40,this._keys={}}listenForEvents(t){window.addEventListener("keydown",this._onKeyDown.bind(this)),window.addEventListener("keyup",this._onKeyUp.bind(this)),t.forEach(function(t){this._keys[t]=!1}.bind(this))}_onKeyDown(t){let e=t.keyCode;e in this._keys&&(t.preventDefault(),this._keys[e]=!0)}_onKeyUp(t){let e=t.keyCode;e in this._keys&&(t.preventDefault(),this._keys[e]=!1)}isDown(t){if(!t in this._keys)throw new Error("Keycode "+t+" is not being listened to");return this._keys[t]}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MapMaker=class{constructor(){this.cols=12,this.rows=12,this.tsize=64,this.layers=[[3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,3,3,1,1,1,1,1,1,1,1,1,1,3,3,1,1,1,1,1,1,1,1,1,1,3,3,1,1,1,1,1,1,1,1,1,1,3,3,1,1,1,1,1,2,1,1,1,1,3,3,1,2,2,1,1,1,1,1,1,1,3,3,1,2,2,1,1,1,1,1,1,1,3,3,1,1,1,2,1,1,1,1,1,1,3,3,1,1,1,1,2,1,1,1,1,1,3,3,1,1,1,1,2,1,1,1,1,1,3,3,3,3,3,3,2,3,3,3,3,3,3],[4,3,3,3,3,3,3,3,3,3,3,4,4,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,4,4,0,0,5,0,0,0,0,0,5,0,4,4,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3]]}getTile(t,e,i){return this.layers[t][i*this.cols+e]}isSolidTileAtXY(t,e){let i=Math.floor(t/this.tsize),s=Math.floor(e/this.tsize);return this.layers.reduce(function(t,e,h){let o=this.getTile(h,i,s);return t||3===o||5===o}.bind(this),!1)}getCol(t){return Math.floor(t/this.tsize)}getRow(t){return Math.floor(t/this.tsize)}getX(t){return t*this.tsize}getY(t){return t*this.tsize}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Camera=class{constructor(t,e,i){this.x=0,this.y=0,this.width=e,this.height=i,this.maxX=t.cols*t.tsize-e,this.maxY=t.rows*t.tsize-i}follow(t){this.following=t,t.screenX=0,t.screenY=0}update(){this.following.screenX=this.width/2,this.following.screenY=this.height/2,this.x=this.following.x-this.width/2,this.y=this.following.y-this.height/2,this.x=Math.max(0,Math.min(this.x,this.maxX)),this.y=Math.max(0,Math.min(this.y,this.maxY)),(this.following.x<this.width/2||this.following.x>this.maxX+this.width/2)&&(this.following.screenX=this.following.x-this.x),(this.following.y<this.height/2||this.following.y>this.maxY+this.height/2)&&(this.following.screenY=this.following.y-this.y)}}},function(t,e,i){t.exports=i.p+"bade87133f6bdf7b831e4ef562915613.png"},function(t,e,i){t.exports=i.p+"915c1f04b733aea4fa6228e72ed11290.png"}]);